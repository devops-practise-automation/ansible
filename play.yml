---
- name: Generate Random Password
  gather_facts: false
  hosts: localhost
  tasks:
    - set_fact:
        pw1: "{{ lookup('password', '/dev/null chars=ascii_lowercase length=3') }}"
        pw2: "{{ lookup('password', '/dev/null chars=ascii_uppercase length=3') }}"
        pw3: "{{ lookup('password', '/dev/null chars=digits          length=3') }}"
        pw4: "{{ lookup('password', '/dev/null chars=_,!,%,*,(,),-,+ length=3') }}"
 
    - set_fact:
        random_password: "{{ (pw1+pw2+pw3+pw4)|shuffle|join('') }}"
 
    - name: Display the password
      debug:
        msg: "Your Password is {{ random_password }}"
